import pprint
import PyMKF
# import matplotlib
# from matplotlib import pyplot as plt
# matplotlib.use('TkAgg')

# data = [7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,7.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5,-2.5]
# plt.plot(data)
# plt.show()
# assert 0

# constants = PyMKF.get_constants()
# pprint.pprint(constants['residualGap'])
# pprint.pprint(constants['minimumNonResidualGap'])
# pprint.pprint(PyMKF.get_constants())


# coreData = {'functionalDescription': {'bobbin': None,
#                            'gapping': [{'area': None,
#                                         'coordinates': None,
#                                         'distanceClosestNormalSurface': None,
#                                         'length': 0.001,
#                                         'sectionDimensions': None,
#                                         'shape': None,
#                                         'type': 'subtractive'},
#                                        {'area': None,
#                                         'coordinates': None,
#                                         'distanceClosestNormalSurface': None,
#                                         'length': 1e-05,
#                                         'sectionDimensions': None,
#                                         'shape': None,
#                                         'type': 'residual'},
#                                        {'area': None,
#                                         'coordinates': None,
#                                         'distanceClosestNormalSurface': None,
#                                         'length': 1e-05,
#                                         'sectionDimensions': None,
#                                         'shape': None,
#                                         'type': 'residual'}],
#                            'material': '3C97',
#                            'name': 'default',
#                            'numberStacks': 1,
#                            'shape': {'aliases': [],
#                                      'dimensions': {'A': 0.0391,
#                                                     'B': 0.0198,
#                                                     'C': 0.0125,
#                                                     'D': 0.0146,
#                                                     'E': 0.030100000000000002,
#                                                     'F': 0.0125,
#                                                     'G': 0.0,
#                                                     'H': 0.0},
#                                      'family': 'etd',
#                                      'familySubtype': '1',
#                                      'name': 'Custom',
#                                      'type': 'custom'},
#                            'type': 'two-piece set'},
#  'geometricalDescription': None,
#  'processedDescription': None}

# core_data = PyMKF.get_core_data(coreData)
# pprint.pprint(core_data)

# coreData = {'functionalDescription': {'bobbin': None,
#                            'gapping': [{'area': 0.000123,
#                                         'coordinates': [0.0, 0.0005, 0.0],
#                                         'distanceClosestNormalSurface': 0.0141,
#                                         'length': 0.001,
#                                         'sectionDimensions': [0.0125, 0.0125],
#                                         'shape': 'round',
#                                         'type': 'subtractive'},
#                                        {'area': 6.2e-05,
#                                         'coordinates': [0.017301, 0.0, 0.0],
#                                         'distanceClosestNormalSurface': 0.014595,
#                                         'length': 1e-05,
#                                         'sectionDimensions': [0.004501, 0.0125],
#                                         'shape': 'irregular',
#                                         'type': 'residual'},
#                                        {'area': 6.2e-05,
#                                         'coordinates': [-0.017301, 0.0, 0.0],
#                                         'distanceClosestNormalSurface': 0.014595,
#                                         'length': 1e-05,
#                                         'sectionDimensions': [0.004501, 0.0125],
#                                         'shape': 'irregular',
#                                         'type': 'residual'}],
#                            'material': '3C97',
#                            'name': 'default',
#                            'numberStacks': 1,
#                            'shape': {'aliases': [],
#                                      'dimensions': {'A': 0.0125,
#                                                     'B': 0.0064,
#                                                     'C': 0.0088,
#                                                     'D': 0.0046,
#                                                     'E': 0.01,
#                                                     'F': 0.0043,
#                                                     'G': 0.0,
#                                                     'H': 0.0,
#                                                     'K': 0.0023},
#                                      'family': 'ep',
#                                      'familySubtype': '1',
#                                      'name': 'Custom',
#                                      'type': 'custom'},
#                            'type': 'two-piece set'},
#  'geometricalDescription': None,
#  'processedDescription': None}

# core_data = PyMKF.get_core_data(coreData)
# pprint.pprint(core_data)


# coreData = {'functionalDescription': {'bobbin': None,
#                            'gapping': [{'area': 1.5e-05,
#                                         'coordinates': [0.0, 0.0, 0.0],
#                                         'distanceClosestNormalSurface': 0.00455,
#                                         'length': 0.0001,
#                                         'sectionDimensions': [0.0043, 0.0043],
#                                         'shape': 'round',
#                                         'type': 'subtractive'},
#                                        {'area': 8.8e-05,
#                                         'coordinates': [0.0, 0.0, 0.00805],
#                                         'distanceClosestNormalSurface': 0.004598,
#                                         'length': 5e-06,
#                                         'sectionDimensions': [0.058628,
#                                                               0.001501],
#                                         'shape': 'irregular',
#                                         'type': 'residual'}],
#                            'material': '3C97',
#                            'name': 'default',
#                            'numberStacks': 1,
#                            'shape': 'E 70/33/32',
#                            'type': 'two-piece set'},
#  'geometricalDescription': None,
#  'processedDescription': None}

# core_data = PyMKF.get_core_data(coreData, False)
# pprint.pprint(core_data)


# coreData = {"functionalDescription":{"name":"default","type":"two-piece set","material":"3C97","shape":{"aliases":[],"dimensions":{"A":0.0595,"B":0.036,"C":0.017,"D":0.0215,"H":0,"G":0},"family":"ur","familySubtype":"1","name":"UR 59/36/17","type":"standard"},"gapping":[{"area":0.000083,"coordinates":[0,0,0],"distanceClosestNormalSurface":0.0015,"length":0.001,"sectionDimensions":[0.0063,0.0145],"shape":"oblong","type":"subtractive"},{"area":0.000043,"coordinates":[0.01145,0,0],"distanceClosestNormalSurface":0.001996,"length":0.00001,"sectionDimensions":[0.002101,0.02],"shape":"rectangular","type":"residual"},{"area":0.000043,"coordinates":[-0.01145,0,0],"distanceClosestNormalSurface":0.001996,"length":0.00001,"sectionDimensions":[0.002101,0.02],"shape":"rectangular","type":"residual"}],"numberStacks":1,"bobbin":None},"geometricalDescription":None,"processedDescription":None}

# core_data = PyMKF.get_core_data(coreData)
# pprint.pprint(core_data['processedDescription']['columns'])
# pprint.pprint(len(core_data['functionalDescription']['gapping']))


# coreGap = {'gapping': [{'area': 0.000123,
#               'coordinates': [0, 0.0007, 0],
#               'distanceClosestNormalSurface': 0.01405,
#               'distanceClosestParallelSurface': 0.01405,
#               'length': 0.0011,
#               'sectionDimensions': [0.0125, 0.0125],
#               'shape': 'round',
#               'type': 'subtractive'},
#              {'area': 6.2e-05,
#               'coordinates': [0.017301, 0.00733, 0],
#               'distanceClosestNormalSurface': 0.006801,
#               'distanceClosestParallelSurface': 0.01405,
#               'length': 0.001,
#               'sectionDimensions': [0.004501, 0.0125],
#               'shape': 'irregular',
#               'type': 'subtractive'},
#              {'area': 6.2e-05,
#               'coordinates': [-0.017301, 0, 0],
#               'distanceClosestNormalSurface': 0.014598,
#               'distanceClosestParallelSurface': 0.01405,
#               'length': 5e-06,
#               'sectionDimensions': [0.004501, 0.0125],
#               'shape': 'irregular',
#               'type': 'residual'},
#              {'area': 6.2e-05,
#               'coordinates': [0.017301, 0, 0],
#               'distanceClosestNormalSurface': 0.007245,
#               'distanceClosestParallelSurface': 0.01405,
#               'length': 0.00011,
#               'sectionDimensions': [0.004501, 0.0125],
#               'shape': 'irregular',
#               'type': 'subtractive'},
#              {'area': 6.2e-05,
#               'coordinates': [0.017301, -0.00733, 0],
#               'distanceClosestNormalSurface': 0.00725,
#               'distanceClosestParallelSurface': 0.01405,
#               'length': 0.0001,
#               'sectionDimensions': [0.004501, 0.0125],
#               'shape': 'irregular',
#               'type': 'subtractive'}],
#  'model': 'Stenglein'}

# reluctance_data = PyMKF.get_gap_reluctance(coreGap['gapping'], "STENGLEIN")
# pprint.pprint(reluctance_data)


# coreGap = {
#     'area': 0.00017,
#     'coordinates': [0, 0.0002, 0],
#     'distanceClosestNormalSurface': 0.0104,
#     'height': 0,
#     'length': 0.001,
#     'sectionDimensions': [0.0147, 0.0147],
#     'shape': 'round',
#     'type': 'subtractive'
# }

# reluctance_data = PyMKF.get_gap_reluctance(coreGap, "ZHANG")
# pprint.pprint(reluctance_data)

# models_info = PyMKF.get_gap_reluctance_model_information()
# pprint.pprint(models_info)
# models = {'gapReluctance': 'EFFECTIVE_LENGTH'}
# core = {'functionalDescription': {'bobbin': None,
#                            'gapping': [{'area': 0.000369,
#                                         'coordinates': [0.0, 0.05, 0.0],
#                                         'distanceClosestNormalSurface': -0.077551,
#                                         'distanceClosestParallelSurface': 0.011524999999999999,
#                                         'length': 0.1,
#                                         'sectionDimensions': [0.02165, 0.02165],
#                                         'shape': 'round',
#                                         'type': 'subtractive'},
#                                        {'area': 0.000184,
#                                         'coordinates': [0.026126, 0.0, 0.0],
#                                         'distanceClosestNormalSurface': 0.022448,
#                                         'distanceClosestParallelSurface': 0.011524999999999999,
#                                         'length': 5e-06,
#                                         'sectionDimensions': [0.007551,
#                                                               0.02165],
#                                         'shape': 'irregular',
#                                         'type': 'residual'},
#                                        {'area': 0.000184,
#                                         'coordinates': [-0.026126, 0.0, 0.0],
#                                         'distanceClosestNormalSurface': 0.022448,
#                                         'distanceClosestParallelSurface': 0.011524999999999999,
#                                         'length': 5e-06,
#                                         'sectionDimensions': [0.007551,
#                                                               0.02165],
#                                         'shape': 'irregular',
#                                         'type': 'residual'}],
#                            'material': '3C95',
#                            'name': 'My Core',
#                            'numberStacks': 1,
#                            'shape': {'aliases': ['ETD 54'],
#                                      'dimensions': {'A': 0.0545,
#                                                     'B': 0.0276,
#                                                     'C': 0.0189,
#                                                     'D': 0.0202,
#                                                     'E': 0.0412,
#                                                     'F': 0.0189},
#                                      'family': 'etd',
#                                      'familySubtype': None,
#                                      'magneticCircuit': 'open',
#                                      'name': 'ETD 54/28/19',
#                                      'type': 'standard'},
#                            'type': 'two-piece set'},
#  'geometricalDescription': None,
#  'processedDescription': None}
# winding = {'functionalDescription': [{'isolationSide': 'primary',
#                             'name': 'Primary',
#                             'numberParallels': 1,
#                             'numberTurns': 1,
#                             'wire': 'Dummy'}],
#  'layersDescription': None,
#  'sectionsDescription': None,
#  'turnsDescription': None}
# inputs = {'designRequirements': {'altitude': None,
#                         'cti': None,
#                         'insulationType': None,
#                         'leakageInductance': None,
#                         'magnetizingInductance': {'excludeMaximum': None,
#                                                   'excludeMinimum': None,
#                                                   'maximum': None,
#                                                   'minimum': None,
#                                                   'nominal': 0.004654652816558039},
#                         'name': None,
#                         'operationTemperature': None,
#                         'overvoltageCategory': None,
#                         'pollutionDegree': None,
#                         'turnsRatios': []},
#  'operationPoints': [{'conditions': {'ambientRelativeHumidity': None,
#                                      'ambientTemperature': 25.0,
#                                      'cooling': None,
#                                      'name': None},
#                       'excitationsPerWinding': [{'current': {'harmonics': None,
#                                                              'processed': None,
#                                                              'waveform': {'ancillaryLabel': None,
#                                                                           'data': [41.0,
#                                                                                    51.0,
#                                                                                    41.0],
#                                                                           'numberPeriods': None,
#                                                                           'time': [0.0,
#                                                                                    2.4999999999999998e-06,
#                                                                                    1e-05]}},
#                                                  'frequency': 100000.0,
#                                                  'magneticField': None,
#                                                  'magneticFluxDensity': None,
#                                                  'magnetizingCurrent': None,
#                                                  'name': 'My Operation Point',
#                                                  }],
#                       'name': None}]}
# gappingType = 'GRINDED'

# gapping = PyMKF.get_gapping_from_number_turns_and_inductance(core,
#                                                              winding,
#                                                              inputs,
#                                                                 gappingType,
#                                                                 4,
#                                                                 models)
# print(gapping)
# print(len(gapping))

            # {"frequency", 800000},
            # {"magneticFluxDensityPeak", 0.1},
            # {"magneticFluxDensityDutyCycle", 0.5},
            # {"temperature", 25},
            # {"magneticFluxDensityOffset", 0},
            # {"magneticFieldStrengthDc", 0},
            # {"expectedVolumetricLosses", 1020000.0},

# coeff = PyMKF.get_steinmetz_coefficients("N49", 800000)

# voluemtriclosses = coeff["k"] * 800000**coeff["alpha"] * 0.1**coeff["beta"] * (coeff["ct2"] * 25**2 - coeff["ct1"] * 25 + coeff["ct0"])
# print(coeff)
# print(voluemtriclosses)
# frequencies = [1000000, 500000, 800000, 300000, 400000, 50000, 25000, 100000, 200000]
# materials = ["3F4", "N49", "N49", "3C94", "N27", "N87", "3C90"]
# comb = {}


# std::map<std::string, std::map<int, std::map<std::string, double>>> dynamicCoefficients = {
#     {"3C90",
#         {
#             {25000, {{"alpha", 0.6119032165032708}, {"beta", 2.6414923616949553}, {"ct0", 0.0016607172720359237}, {"ct1", 2.388168471291204e-05}, {"ct2", 1.2273149176903466e-07}, {"k", 25358950.162134618}}},
#             {50000, {{"alpha", 0.6119032165032708}, {"beta", 2.6414923616949553}, {"ct0", 0.0016607172720359237}, {"ct1", 2.388168471291204e-05}, {"ct2", 1.2273149176903466e-07}, {"k", 25358950.162134618}}},
#             {100000, {{"alpha", 1.6922655116583307}, {"beta", 2.6387558212068556}, {"ct0", 0.007035640971373052}, {"ct1", 0.00010466617163345241}, {"ct2", 5.584896170038324e-07}, {"k", 33.12013020258462}}},
#             {200000, {{"alpha", 2.3888138991940306}, {"beta", 2.319170498242314}, {"ct0", 0.0013316374491110425}, {"ct1", 1.2215818567857081e-05}, {"ct2", 6.436835159667792e-08}, {"k", 0.01008697340219455}}},
#             {300000, {{"alpha", 3.207909730760055}, {"beta", 2.208742992181126}, {"ct0", 2.524783110701414e-06}, {"ct1", 1.3817591590708868e-08}, {"ct2", 8.471092014959255e-11}, {"k", 9.16521541023768e-05}}},
#             {400000, {{"alpha", 3.163524246279912}, {"beta", 2.140623673581521}, {"ct0", 8.029803690795726e-07}, {"ct1", 1.5929730782382e-09}, {"ct2", 1.2078361153444373e-11}, {"k", 0.0002309379771197434}}},
#             {500000, {{"alpha", 4.491346273001152}, {"beta", 2.1332489188659687}, {"ct0", 7.90326808296919e-11}, {"ct1", 1.1865327830297114e-13}, {"ct2", 9.007097262275786e-16}, {"k", 6.866630262826199e-08}}},
#             {800000, {{"alpha", 4.491346273001152}, {"beta", 2.1332489188659687}, {"ct0", 7.90326808296919e-11}, {"ct1", 1.1865327830297114e-13}, {"ct2", 9.007097262275786e-16}, {"k", 6.866630262826199e-08}}},
#             {1000000, {{"alpha", 4.491346273001152}, {"beta", 2.1332489188659687}, {"ct0", 7.90326808296919e-11}, {"ct1", 1.1865327830297114e-13}, {"ct2", 9.007097262275786e-16}, {"k", 6.866630262826199e-08}}},
#         },
#     },
# };


# for material in materials:

#     aux = {}
#     for frequency in frequencies:
#         aux[frequency] = PyMKF.get_steinmetz_coefficients(material, frequency)
#     comb[material] = aux

# # import pprint
# # pprint.pprint(comb)

# mapStr = "std::map<std::string, std::map<int, std::map<std::string, double>>> dynamicCoefficients = {\n"

# for material in materials:
#     mapStr += '\t{' + f'"{material}",\n' + '\t\t{\n'
#     for frequency in frequencies:
#         print(str(comb[material][frequency]))
#         aux = '\t{' + str(frequency) + ', {'
#         for key, value in comb[material][frequency].items():
#             aux += '{' + f'"{key}", {value}' + '}, '
#         aux += '}' + '}'
#         print(aux)
#         mapStr += f'\t\t{aux},\n'
#     mapStr += '\t\t},\n\t},\n' 
# mapStr += '};' 
# print(mapStr)

# models = {'coreLosses': 'STEINMETZ', 'gapReluctance': 'BALAKRISHNAN'}
# core = {'functionalDescription': {'gapping': [{'area': 9.8e-05,
#                                         'coordinates': [0.0, 0.0001, 0.0],
#                                         'distanceClosestNormalSurface': 0.011301,
#                                         'distanceClosestParallelSurface': 0.006999999999999999,
#                                         'length': 0.0002,
#                                         'sectionDimensions': [0.0092, 0.01065],
#                                         'shape': 'rectangular',
#                                         'type': 'subtractive'},
#                                        {'area': 4.7e-05,
#                                         'coordinates': [0.0138, 0.0, 0.0],
#                                         'distanceClosestNormalSurface': 0.011498,
#                                         'distanceClosestParallelSurface': 0.006999999999999999,
#                                         'length': 5e-06,
#                                         'sectionDimensions': [0.004401,
#                                                               0.01065],
#                                         'shape': 'rectangular',
#                                         'type': 'residual'},
#                                        {'area': 4.7e-05,
#                                         'coordinates': [-0.0138, 0.0, 0.0],
#                                         'distanceClosestNormalSurface': 0.011498,
#                                         'distanceClosestParallelSurface': 0.006999999999999999,
#                                         'length': 5e-06,
#                                         'sectionDimensions': [0.004401,
#                                                               0.01065],
#                                         'shape': 'rectangular',
#                                         'type': 'residual'}],
#                            'material': 'XFlux 19',
#                            'numberStacks': 1,
#                            'shape': {'aliases': [],
#                                      'dimensions': {'A': 0.032,
#                                                     'B': 0.0161,
#                                                     'C': 0.01065,
#                                                     'D': 0.0115,
#                                                     'E': 0.0232,
#                                                     'F': 0.0092,
#                                                     'G': 0.0,
#                                                     'H': 0.0},
#                                      'family': 'e',
#                                      'familySubtype': None,
#                                      'magneticCircuit': 'open',
#                                      'name': 'E 32/16/11',
#                                      'type': 'standard'},
#                            'type': 'two-piece set'},
#  'manufacturerInfo': None,
#  'name': 'My Core'}
# winding = {'bobbin': None,
#  'functionalDescription': [{'isolationSide': 'primary',
#                             'name': 'Primary',
#                             'numberParallels': 1,
#                             'numberTurns': 33,
#                             'wire': 'Dummy'}],
#  'layersDescription': None,
#  'sectionsDescription': None,
#  'turnsDescription': None}
# inputs = {'conditions': {'ambientRelativeHumidity': None,
#                 'ambientTemperature': 37.0,
#                 'cooling': None,
#                 'name': None},
#  'excitationsPerWinding': [{'current': {'harmonics': None,
#                                         'processed': None,
#                                         'waveform': {'ancillaryLabel': None,
#                                                      'data': [-5.0, 5.0, -5.0],
#                                                      'numberPeriods': None,
#                                                      'time': [0.0,
#                                                               2.4999999999999998e-06,
#                                                               1e-05]}},
#                             'frequency': 100000.0,
#                             'magneticFieldStrength': None,
#                             'magneticFluxDensity': None,
#                             'magnetizingCurrent': None,
#                             'name': 'My Operation Point',
#                             'voltage': {'harmonics': None,
#                                         'processed': None,
#                                         'waveform': {'ancillaryLabel': None,
#                                                      'data': [700.5,
#                                                               700.5,
#                                                               -200.4999999999999996,
#                                                               -200.4999999999999996,
#                                                               700.5],
#                                                      'numberPeriods': None,
#                                                      'time': [0.0,
#                                                               2.4999999999999998e-06,
#                                                               2.4999999999999998e-06,
#                                                               1e-05,
#                                                               1e-05]}}}],
#  'name': None}

# core_losses_result = PyMKF.get_core_losses(core,
#                                            winding,
#                                            inputs,
#                                            models)

models = {'coreLosses': 'IGSE', 'coreTemperature': 'MANIKTALA', 'gapReluctance': 'ZHANG'}
core = {'functionalDescription': {'gapping': [{'area': None,
                                        'coordinates': None,
                                        'distanceClosestNormalSurface': None,
                                        'distanceClosestParallelSurface': None,
                                        'length': 0.001,
                                        'sectionDimensions': None,
                                        'shape': None,
                                        'type': 'subtractive'},
                                       {'area': None,
                                        'coordinates': None,
                                        'distanceClosestNormalSurface': None,
                                        'distanceClosestParallelSurface': None,
                                        'length': 1e-05,
                                        'sectionDimensions': None,
                                        'shape': None,
                                        'type': 'residual'},
                                       {'area': None,
                                        'coordinates': None,
                                        'distanceClosestNormalSurface': None,
                                        'distanceClosestParallelSurface': None,
                                        'length': 1e-05,
                                        'sectionDimensions': None,
                                        'shape': None,
                                        'type': 'residual'}],
                           'material': 'High Flux 40',
                           'numberStacks': 1,
                           'shape': {'aliases': [],
                                     'dimensions': {'A': 0.0391,
                                                    'B': 0.0198,
                                                    'C': 0.0125,
                                                    'D': 0.0146,
                                                    'E': 0.030100000000000002,
                                                    'F': 0.0125,
                                                    'G': 0.0,
                                                    'H': 0.0},
                                     'family': 'etd',
                                     'familySubtype': '1',
                                     'magneticCircuit': None,
                                     'name': 'ETD 39/20/13',
                                     'type': 'standard'},
                           'type': 'two-piece set'},
 'geometricalDescription': None,
 'manufacturerInfo': None,
 'name': 'My Core',
 'processedDescription': None}
winding = {'bobbin': None,
 'functionalDescription': [{'isolationSide': 'primary',
                            'name': 'Primary',
                            'numberParallels': 1,
                            'numberTurns': 24,
                            'wire': 'Dummy'}],
 'layersDescription': None,
 'sectionsDescription': None,
 'turnsDescription': None}
inputs = {'designRequirements': {'altitude': None,
                        'cti': None,
                        'insulationType': None,
                        'leakageInductance': None,
                        'magnetizingInductance': {'excludeMaximum': None,
                                                  'excludeMinimum': None,
                                                  'maximum': None,
                                                  'minimum': None,
                                                  'nominal': 0.0001279222825940401},
                        'name': None,
                        'operationTemperature': None,
                        'overvoltageCategory': None,
                        'pollutionDegree': None,
                        'turnsRatios': []},
 'operationPoints': [{'conditions': {'ambientRelativeHumidity': None,
                                     'ambientTemperature': 25.0,
                                     'cooling': None,
                                     'name': None},
                      'excitationsPerWinding': [{'current': {'harmonics': None,
                                                             'processed': None,
                                                             'waveform': {'ancillaryLabel': None,
                                                                          'data': [-5.0,
                                                                                   5.0,
                                                                                   -5.0],
                                                                          'numberPeriods': None,
                                                                          'time': [0.0,
                                                                                   2.5e-06,
                                                                                   1e-05]}},
                                                 'frequency': 100000.0,
                                                 'magneticFieldStrength': None,
                                                 'magneticFluxDensity': None,
                                                 'magnetizingCurrent': None,
                                                 'name': 'My Operation Point',
                                                 'voltage': None}],
                      'name': None}]}
core_losses_result = PyMKF.get_core_losses(core,
                                           winding,
                                           inputs,
                                           models)

print(core_losses_result)
print(core_losses_result['totalLosses'])
# print(core_losses_result.keys())
# print(core_losses_result['totalLosses'])
# print(core_losses_result['magneticFluxDensityAcPeak'])

# plt.plot(core_losses_result['_hysteresisMajorH'], core_losses_result['_hysteresisMajorLoopBottom'])
# plt.plot(core_losses_result['_hysteresisMajorH'], core_losses_result['_hysteresisMajorLoopTop'])
# plt.show()

# plt.plot(core_losses_result['_hysteresisMinorLoopBottom'])
# plt.plot(core_losses_result['_hysteresisMinorLoopTop'])
# plt.show()


# core = {'functionalDescription': {'gapping': [{'area': None,
#                                         'coordinates': None,
#                                         'distanceClosestNormalSurface': None,
#                                         'distanceClosestParallelSurface': None,
#                                         'length': 0.001,
#                                         'sectionDimensions': None,
#                                         'shape': None,
#                                         'type': 'subtractive'},
#                                        {'area': None,
#                                         'coordinates': None,
#                                         'distanceClosestNormalSurface': None,
#                                         'distanceClosestParallelSurface': None,
#                                         'length': 1e-05,
#                                         'sectionDimensions': None,
#                                         'shape': None,
#                                         'type': 'residual'},
#                                        {'area': None,
#                                         'coordinates': None,
#                                         'distanceClosestNormalSurface': None,
#                                         'distanceClosestParallelSurface': None,
#                                         'length': 1e-05,
#                                         'sectionDimensions': None,
#                                         'shape': None,
#                                         'type': 'residual'}],
#                            'material': '3C97',
#                            'numberStacks': 1,
#                            'shape': {'aliases': [],
#                                      'dimensions': {'A': 0.0391,
#                                                     'B': 0.0198,
#                                                     'C': 0.0125,
#                                                     'D': 0.0146,
#                                                     'E': 0.030100000000000002,
#                                                     'F': 0.0125,
#                                                     'G': 0.0,
#                                                     'H': 0.0},
#                                      'family': 'etd',
#                                      'familySubtype': '1',
#                                      'magneticCircuit': None,
#                                      'name': 'ETD 39/20/13',
#                                      'type': 'standard'},
#                            'type': 'two-piece set'},
#  'geometricalDescription': None,
#  'manufacturerInfo': None,
#  'name': 'My Core',
#  'processedDescription': None}
# winding = {'bobbin': None,
#  'functionalDescription': [{'isolationSide': 'primary',
#                             'name': 'Primary',
#                             'numberParallels': 1,
#                             'numberTurns': 23,
#                             'wire': 'Dummy'}],
#  'layersDescription': None,
#  'sectionsDescription': None,
#  'turnsDescription': None}
# operationPoint = {'conditions': {'ambientRelativeHumidity': None,
#                 'ambientTemperature': 25.0,
#                 'cooling': None,
#                 'name': None},
#  'excitationsPerWinding': [{'current': {'harmonics': None,
#                                         'processed': None,
#                                         'waveform': {'ancillaryLabel': 'Custom',
#                                                      'data': [0.0,
#                                                               0.39879998657123195,
#                                                               0.7965068900995194,
#                                                               1.1920306236065592,
#                                                               1.584287084031326,
#                                                               1.972201123681208,
#                                                               2.354709497137099,
#                                                               2.730763775535188,
#                                                               3.099333220237597,
#                                                               3.459407608015346,
#                                                               3.8099999999999996,
#                                                               4.150149446814505,
#                                                               4.4789236224686455,
#                                                               4.795421379799762,
#                                                               5.0987752204545,
#                                                               5.388153672641492,
#                                                               5.662763570137744,
#                                                               5.921852226302119,
#                                                               6.1647094971371,
#                                                               6.390669727744131,
#                                                               6.599113576837422,
#                                                               6.789469714315363,
#                                                               6.961216387236619,
#                                                               7.113882849908677,
#                                                               7.24705065416907,
#                                                               7.3603547963227,
#                                                               7.453484717591599,
#                                                               7.52618515533495,
#                                                               7.578256842706242,
#                                                               7.609557054829852,
#                                                               7.62,
#                                                               7.609557054829852,
#                                                               7.578256842706243,
#                                                               7.52618515533495,
#                                                               7.453484717591599,
#                                                               7.3603547963227,
#                                                               7.247050654169071,
#                                                               7.113882849908677,
#                                                               6.96121638723662,
#                                                               6.789469714315364,
#                                                               6.599113576837423,
#                                                               6.390669727744133,
#                                                               6.1647094971371,
#                                                               5.92185222630212,
#                                                               5.662763570137746,
#                                                               5.388153672641493,
#                                                               5.098775220454501,
#                                                               4.795421379799761,
#                                                               4.478923622468646,
#                                                               4.150149446814508,
#                                                               3.8099999999999996,
#                                                               3.459407608015347,
#                                                               3.0993332202375963,
#                                                               2.7307637755351877,
#                                                               2.3547094971371,
#                                                               1.9722011236812067,
#                                                               1.584287084031326,
#                                                               1.19203062360656,
#                                                               0.7965068900995181,
#                                                               0.39879998657123183,
#                                                               4.3171406400077605e-15,
#                                                               -0.39879998657122995,
#                                                               -0.7965068900995163,
#                                                               -1.192030623606558,
#                                                               -1.5842870840313241,
#                                                               -1.9722011236812051,
#                                                               -2.3547094971370983,
#                                                               -2.730763775535186,
#                                                               -3.0993332202375976,
#                                                               -3.4594076080153457,
#                                                               -3.809999999999998,
#                                                               -4.150149446814506,
#                                                               -4.478923622468645,
#                                                               -4.79542137979976,
#                                                               -5.0987752204545,
#                                                               -5.388153672641492,
#                                                               -5.662763570137742,
#                                                               -5.921852226302116,
#                                                               -6.164709497137099,
#                                                               -6.390669727744132,
#                                                               -6.599113576837421,
#                                                               -6.789469714315363,
#                                                               -6.961216387236616,
#                                                               -7.113882849908678,
#                                                               -7.24705065416907,
#                                                               -7.3603547963227,
#                                                               -7.453484717591599,
#                                                               -7.526185155334949,
#                                                               -7.578256842706242,
#                                                               -7.609557054829853,
#                                                               -7.62,
#                                                               -7.609557054829852,
#                                                               -7.578256842706243,
#                                                               -7.52618515533495,
#                                                               -7.453484717591599,
#                                                               -7.360354796322699,
#                                                               -7.247050654169071,
#                                                               -7.11388284990868,
#                                                               -6.96121638723662,
#                                                               -6.789469714315365,
#                                                               -6.599113576837422,
#                                                               -6.390669727744133,
#                                                               -6.164709497137101,
#                                                               -5.921852226302121,
#                                                               -5.662763570137742,
#                                                               -5.388153672641494,
#                                                               -5.098775220454499,
#                                                               -4.795421379799764,
#                                                               -4.478923622468647,
#                                                               -4.1501494468145115,
#                                                               -3.8099999999999974,
#                                                               -3.459407608015348,
#                                                               -3.099333220237597,
#                                                               -2.7307637755351917,
#                                                               -2.354709497137101,
#                                                               -1.9722011236812076,
#                                                               -1.5842870840313235,
#                                                               -1.1920306236065612,
#                                                               -0.796506890099519,
#                                                               -0.3987999865712361,
#                                                               -8.634281280015521e-15],
#                                                      'numberPeriods': None,
#                                                      'time': [0.0,
#                                                               6.775067750677508e-08,
#                                                               1.3550135501355015e-07,
#                                                               2.0325203252032525e-07,
#                                                               2.710027100271003e-07,
#                                                               3.387533875338755e-07,
#                                                               4.065040650406505e-07,
#                                                               4.742547425474256e-07,
#                                                               5.420054200542006e-07,
#                                                               6.097560975609757e-07,
#                                                               6.77506775067751e-07,
#                                                               7.452574525745258e-07,
#                                                               8.13008130081301e-07,
#                                                               8.807588075880764e-07,
#                                                               9.485094850948512e-07,
#                                                               1.016260162601626e-06,
#                                                               1.0840108401084012e-06,
#                                                               1.1517615176151767e-06,
#                                                               1.2195121951219514e-06,
#                                                               1.2872628726287264e-06,
#                                                               1.355013550135502e-06,
#                                                               1.4227642276422766e-06,
#                                                               1.4905149051490517e-06,
#                                                               1.5582655826558272e-06,
#                                                               1.626016260162602e-06,
#                                                               1.693766937669377e-06,
#                                                               1.7615176151761528e-06,
#                                                               1.8292682926829277e-06,
#                                                               1.8970189701897023e-06,
#                                                               1.9647696476964774e-06,
#                                                               2.032520325203252e-06,
#                                                               2.100271002710028e-06,
#                                                               2.1680216802168024e-06,
#                                                               2.2357723577235777e-06,
#                                                               2.3035230352303534e-06,
#                                                               2.3712737127371275e-06,
#                                                               2.4390243902439027e-06,
#                                                               2.5067750677506785e-06,
#                                                               2.574525745257453e-06,
#                                                               2.6422764227642278e-06,
#                                                               2.710027100271004e-06,
#                                                               2.777777777777778e-06,
#                                                               2.845528455284553e-06,
#                                                               2.913279132791329e-06,
#                                                               2.9810298102981034e-06,
#                                                               3.0487804878048786e-06,
#                                                               3.1165311653116544e-06,
#                                                               3.1842818428184296e-06,
#                                                               3.252032520325204e-06,
#                                                               3.3197831978319794e-06,
#                                                               3.387533875338754e-06,
#                                                               3.4552845528455295e-06,
#                                                               3.5230352303523057e-06,
#                                                               3.5907859078590797e-06,
#                                                               3.6585365853658554e-06,
#                                                               3.72628726287263e-06,
#                                                               3.7940379403794047e-06,
#                                                               3.861788617886181e-06,
#                                                               3.929539295392955e-06,
#                                                               3.99728997289973e-06,
#                                                               4.065040650406504e-06,
#                                                               4.1327913279132794e-06,
#                                                               4.200542005420056e-06,
#                                                               4.268292682926832e-06,
#                                                               4.336043360433605e-06,
#                                                               4.40379403794038e-06,
#                                                               4.4715447154471555e-06,
#                                                               4.53929539295393e-06,
#                                                               4.607046070460707e-06,
#                                                               4.674796747967483e-06,
#                                                               4.742547425474255e-06,
#                                                               4.810298102981031e-06,
#                                                               4.8780487804878055e-06,
#                                                               4.945799457994581e-06,
#                                                               5.013550135501357e-06,
#                                                               5.081300813008133e-06,
#                                                               5.149051490514906e-06,
#                                                               5.216802168021681e-06,
#                                                               5.2845528455284555e-06,
#                                                               5.352303523035232e-06,
#                                                               5.420054200542008e-06,
#                                                               5.487804878048783e-06,
#                                                               5.555555555555556e-06,
#                                                               5.623306233062332e-06,
#                                                               5.691056910569106e-06,
#                                                               5.758807588075883e-06,
#                                                               5.826558265582658e-06,
#                                                               5.8943089430894335e-06,
#                                                               5.962059620596207e-06,
#                                                               6.029810298102982e-06,
#                                                               6.097560975609757e-06,
#                                                               6.165311653116534e-06,
#                                                               6.233062330623309e-06,
#                                                               6.300813008130084e-06,
#                                                               6.368563685636859e-06,
#                                                               6.436314363143633e-06,
#                                                               6.504065040650408e-06,
#                                                               6.571815718157183e-06,
#                                                               6.639566395663959e-06,
#                                                               6.707317073170734e-06,
#                                                               6.775067750677508e-06,
#                                                               6.8428184281842825e-06,
#                                                               6.910569105691059e-06,
#                                                               6.978319783197834e-06,
#                                                               7.046070460704611e-06,
#                                                               7.1138211382113845e-06,
#                                                               7.181571815718159e-06,
#                                                               7.249322493224933e-06,
#                                                               7.317073170731711e-06,
#                                                               7.384823848238486e-06,
#                                                               7.45257452574526e-06,
#                                                               7.520325203252034e-06,
#                                                               7.588075880758809e-06,
#                                                               7.655826558265583e-06,
#                                                               7.723577235772362e-06,
#                                                               7.791327913279133e-06,
#                                                               7.85907859078591e-06,
#                                                               7.926829268292686e-06,
#                                                               7.99457994579946e-06,
#                                                               8.062330623306238e-06,
#                                                               8.130081300813007e-06]}},
#                             'frequency': 123000.0,
#                             'magneticFieldStrength': None,
#                             'magneticFluxDensity': None,
#                             'magnetizingCurrent': None,
#                             'name': 'My Operation Point Alf sin',
#                             'voltage': None}],
#  'name': None}
# models = {'gapReluctance': 'ZHANG'}


# inductance = PyMKF.get_inductance_from_number_turns_and_gapping(core,
#                                                                 winding,
#                                                                 operationPoint,
#                                                                 models)

# print(inductance)